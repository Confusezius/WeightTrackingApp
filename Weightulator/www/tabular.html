<!DOCTYPE html style="min-height:100%">

<head>
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
    <meta content="keyword1,keyword2,keyword3" name="keywords" />
    <meta content="Description of your page" name="description" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="jmob/jquery.mobile-1.3.1.css">
        <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
        <script type="text/javascript" src="jmob/jquery.mobile-1.3.1.js"></script>
        <script type="text/javascript" src="js/jquery.flot.pack.js"></script>
        <script type="text/javascript" src="js/numerics126.js"></script>
        <script type="text/javascript" src="js/cordova.js"></script>
        <style>
            .ui-page {
                background : transparent url('img/linedpaper_@2X.png') 0 0 no-repeat fixed !important;
                background-size : cover;
                position:fixed;
                height:100%;
            }
            .shadow {
                border: 1px solid rgba(0,128,0);
                border-radius: 1px ;
                width:90%;
                margin-top:2.5%;
                padding:5px;
                padding-left:10px;
                padding-right:10px;
                padding-top:10px;
                /**                background: rgba(240,0,0, 0.75);**/
                -moz-box-shadow:    1.5px 1.5px 2px 2.25px #ccc;
                -webkit-box-shadow: 1.5px 1.5px 2px 2.25px #ccc;
                box-shadow:         1.5px 1.5px 2px 2.25px #ccc;
                margin: auto auto auto auto;
            }
            #listtable th{
                background:#CAE8EA ;
                -moz-box-shadow:    1.5px 1.5px 2px 2.25px #ccc;
                -webkit-box-shadow: 1.5px 1.5px 2px 2.25px #ccc;
                box-shadow:         1.5px 1.5px 2px 2.25px #ccc;
                border-radius: 1.5px 1.5px 1.5px 1.5px;
                opacity:0.9;
            }
            #listtable td{
                color:rgba(250,250,250,1);
                background: rgba(250,0,0,0.7);
                border:1px solid rgba(240,200,250, 0.75);
                border-radius:2px;
                -webkit-box-shadow: 1px 1px 1.5px 1.5px #ccc;
                padding: 8px;
                text-align:center;
                border-radius: 10px 1px 10px 1px;
                border-right: 1px solid rgba(10,10,10,1);
            }
            
            </style>
</head>

<body>
    <div data-role="page" id="pp1">
        <script>
            $(document).on("pageinit", function(){
                           appendtab();
                           });
            /**$(function() {
             var weekdays = new Array("Sun", "Mon", "Tue", "Wed","Thu", "Fri", "Sat");
             var aDate = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 ");
             var aDate2 = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 ");
             var time   = JSON.parse(localStorage["Hf1"]);
             var weight = JSON.parse(localStorage["Hf2"]);
             var dday = new Array("01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31");
             var mons = new Array("01","02","03","04","05","06","07","08","09","10","11","12");
             var thingt = new Array(2*time.length);
             for(var i=0; i<time.length; i++){
             var aDate = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 ");
             aDate.setDate(aDate2.getDate()+parseFloat(time[i]));
             var one = aDate.getDate();
             var three= aDate.getFullYear();
             var five = aDate.getDay();
             var six = aDate.getMonth();
             thingt[i]=weekdays[five] + ", "+dday[one]+"/"+mons[six]+"/"+three.toString();
             }
             for(var i=time.length;i<thingt.length;i++){
             thingt[i]=weight[i-time.length];
             }
             var availableTags = thingt;
             $( "#tpah" ).autocomplete({
             source: availableTags
             });
             });**/
            
            function appendtab(){
                var weekdays = new Array("Sun", "Mon", "Tue", "Wed",
                                         "Thu", "Fri", "Sat");
                var dday = new Array("01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31");
                //var secc = new Array("00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59");
                var mons = new Array("01","02","03","04","05","06","07","08","09","10","11","12");
                var tom = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 "); // 12-14-12
                var tomt = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 "); // 12-14-12
                var counts = localStorage.getItem("number");
                var time   = JSON.parse(localStorage["Hf1"]);
                var weight = JSON.parse(localStorage["Hf2"]);
                for(var i=0; i<time.length; i++){
                    var tom = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 "); // 12-14-12
                    tom.setDate(tomt.getDate()+parseFloat(time[i])); // add 20 days);
                    var one = tom.getDate();
                    var three= tom.getFullYear();
                    var five = tom.getDay();
                    var six = tom.getMonth();
                    $("#listtable").find('tbody').append($('<tr onclick="shima(this)">').append($('<td>').text(weekdays[five] + ", "+dday[one]+"/"+mons[six]+"/"+three)).append($('<td>').text(weight[i].toString())));
                }
                
            }
            
            function shima(x){
                var b = x.rowIndex;
                var ong = document.getElementById("listtable").rows[b].cells[1].innerHTML;
                var king = prompt("Change weight[kg]:",ong);
                if (king != ong && king != null && king != ""){
                    Hf2 = JSON.parse(localStorage["Hf2"]);
                    sv = JSON.parse(localStorage["sv"]);
                    Hf2[b-1]=king;
                    alert(sv);
                    alert(Hf2);
                    sv[2*b-1]=king;
                    alert(sv);
                    alert(Hf2);
                    localStorage["Hf2"]=JSON.stringify(Hf2);
                    localStorage["sv"]=JSON.stringify(sv);
                    document.getElementById("listtable").rows[b].cells[1].innerHTML=king;
                }else{
                    return false;
                }
            }
            
            function popuup(){
                var counting  = document.getElementById("listtable").rows.length;
                for(var i=1;i<counting;i++){
                    document.getElementById("listtable").rows[i].setAttribute("class","");
                }
                for(var i=1;i<counting;i++){
                    for(var j=0; j<2; j++){
                        if(document.getElementById("listtable").rows[i].cells[j].innerHTML==document.getElementById("tpah").value){
                            document.getElementById("listtable").rows[i].setAttribute("class","error");
                        }
                    }
                }
            }
            function addstuff(){
                var aDate = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 ");
                var aDate2 = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 ");
                var sth = $("#sth").val();
                var sth2 = $("#sth2").val();
                var times = JSON.parse(localStorage["Hf1"]);
                var pon = times[times.length-1];
                var sthh=sth.split("/");
                alert("h");
                $('#listtable > tbody > tr').eq(5).after($('<tr onclick="shima(this)">').append($('<td>').text(sth)).append($('<td>').text(sth2)));
                for(var i =0; i<times.length;i++){
                    var aDate = new Date("Fri Dec 14 2012 16:29:49 GMT+0100 "); // 12-14-12
                    aDate.setDate(aDate2.getDate()+parseFloat(times[i])); // add 20 days);
                    var one = aDate.getDate();
                    var three= aDate.getFullYear();
                    var five = aDate.getDay();
                    var six = aDate.getMonth();
                    if(sthh[2]<=three){
                        if(sthh[1]<=six){
                            if(sthh[0]<one){
                                $("#listtable").rows[i+1].append($('<tr onclick="shima(this)">').append($('<td>').text(weekdays[five] + ", "+dday[one]+"/"+mons[six]+"/"+three)).append($('<td>').text(weight[i].toString())));
                            }
                        }
                    }
                    $("#listtable").find('tbody').append($('<tr onclick="shima(this)">').append($('<td>').text(weekdays[five] + ", "+dday[one]+"/"+mons[six]+"/"+three)).append($('<td>').text(weight[i].toString())));
                }
                alert(sthh);
            }
            $(function(){$('#listtable > tbody > tr').bind("taphold",function(){alert($(this).index());});});
            
            window.onorientationchange=function(){
                switch(window.orientation){
                    case -90:
                    $("#foo1").hide();                    
                    $("#wong").hide();
                    $("#plotarea").show();
                    //$("#wong").
                    var HH=JSON.parse(localStorage["plotdataH"]);
                    var data = [
                                {label: 'Weight',
                                data: HH,
                                lines: {show:true},
                                points: {show:true}}];
                    
                    var options = {
                        grid: {
                            hoverable: true,
                            clickable: true},
                        
                        legend: {
                            show: false,
                            margin: 10,
                            backgroundOpacity: 0.5
                        }
                    };
                    var plotarea = $("#plotarea");
                    var height = $(window).height();
                    var width = $(window).width();
                    plotarea.css("height", height);
                    plotarea.css("width", width);
                    $.plot( plotarea , data, options );
                    $("#plotarea").bind("plotclick", function(event, pos, item){
                                      if(item){
                                      msg = "Datapoint:" + " Date: " + item.datapoint[0].toFixed(2) + ", Weight: " + item.datapoint[1].toFixed(2);
                                      alert(msg);
                                      }
                                      });
                    break;
                    case 90:
                    $("#foo1").hide();                    
                    $("#wong").hide();
                    $("#plotarea").show();
                    var HH=JSON.parse(localStorage["plotdataH"]);
                    var data = [
                                {label: 'Weight',
                                data: HH,
                                lines: {show:true},
                                points: {show:true}}];
                    
                    var options = {
                        grid: {
                            hoverable: true,
                            clickable: true},
                        legend: {
                            show: false,
                            margin: 10,
                            backgroundOpacity: 0.5
                        }
                    };
                    var plotarea = $("#plotarea");
                    var height = $(window).height();
                    var width = $(window).width();
                    plotarea.css("height", height);
                    plotarea.css("width", width);
                    $.plot( plotarea , data, options );
                    $("#plotarea").bind("plotclick", function(event, pos, item){
                                        if(item){
                                        msg = "Datapoint:" + " Date: " + item.datapoint[0].toFixed(2) + ", Weight: " + item.datapoint[1].toFixed(2);
                                        alert(msg);
                                        }
                                        });
                    break;
                    
                    default:
                    $("#wong").show();
                    $("#plotarea").hide();
                    $("#foo1").show();
                    appendtab();
                    break;
                }
            }
            
            </script>
        <!--<script>$(function(){$("#sth").datepicker();})</script>-->
        <!--<input type="text" placeholder="Search..." id="tpah" style="width:200px;height:30px"/>
         <button>Search</button>-->
        <div data-role="panel" data-display="overlay" id="mypanel" data-position="left"data-theme="c">
            <ul data-role="listview" data-theme="d">
                <!--<li data-icon="arrow-r"><a href="#" data-rel="close">Close</a></li>-->
                <li data-role="list-divider">Data Table</li>
                <li data-icon="arrow-l"><a href="profile.html" data-transition="slide" data-ajax="false">Profile</a></li>
                <li data-icon="arrow-l"><a href="twitter.html" data-transition="slide" data-ajax="false">Social</a></li>
                <li data-icon="arrow-l"><a href="help.html" data-transition="slide" data-ajax="false">Help</a></li>
                
            </ul>
        </div>
        <div data-role="footer" data-position="fixed" id="foo1">
            <div data-role="navbar" data-iconpos="left">
                <ul>
                    <li><a href="#mypanel" data-icon="home">My Place</a></li>
                    <li><a href="#mypanel" data-icon="bars">Menu</a></li>
                    <li><a href="index.html" data-icon="arrow-r" data-transition="slide" data-ajax="false"
                        >Home</a></li>
                </ul>
            </div>
        </div>
        <div id="plotarea">
        </div>
        <div id="wong" class="shadow">
            <table id="listtable" style="width:95%;margin-left:2.5%">
                <thead>
                    <tr>
                        <th>Date measured</th>
                        <th>Weight [kg]</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>